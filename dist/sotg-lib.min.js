function MapLabel(e){this.set("fontFamily","sans-serif"),this.set("fontSize",12),this.set("fontColor","#000000"),this.set("strokeWeight",4),this.set("strokeColor","#ffffff"),this.set("align","center"),this.set("zIndex",1e3),this.setValues(e)}var saveAs=saveAs||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,n=function(){return e.URL||e.webkitURL||e},o=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in o,a=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},i=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),s=e.webkitRequestFileSystem,d=e.requestFileSystem||s||e.mozRequestFileSystem,u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},f="application/octet-stream",l=0,c=500,p=function(t){var o=function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()};e.chrome?o():setTimeout(o,c)},v=function(e,t,n){t=[].concat(t);for(var o=t.length;o--;){var r=e["on"+t[o]];if("function"==typeof r)try{r.call(e,n||e)}catch(a){u(a)}}},h=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e},m=function(t,u,c){c||(t=h(t));var m,y,g,w=this,T=t.type,O=!1,E=function(){v(w,"writestart progress write writeend".split(" "))},b=function(){if(y&&i&&"undefined"!=typeof FileReader){var o=new FileReader;return o.onloadend=function(){var e=o.result;y.location.href="data:attachment/file"+e.slice(e.search(/[,;]/)),w.readyState=w.DONE,E()},o.readAsDataURL(t),void(w.readyState=w.INIT)}if((O||!m)&&(m=n().createObjectURL(t)),y)y.location.href=m;else{var r=e.open(m,"_blank");void 0==r&&i&&(e.location.href=m)}w.readyState=w.DONE,E(),p(m)},L=function(e){return function(){return w.readyState!==w.DONE?e.apply(this,arguments):void 0}},R={create:!0,exclusive:!1};return w.readyState=w.INIT,u||(u="download"),r?(m=n().createObjectURL(t),void setTimeout(function(){o.href=m,o.download=u,a(o),E(),p(m),w.readyState=w.DONE})):(e.chrome&&T&&T!==f&&(g=t.slice||t.webkitSlice,t=g.call(t,0,t.size,f),O=!0),s&&"download"!==u&&(u+=".download"),(T===f||s)&&(y=e),d?(l+=t.size,void d(e.TEMPORARY,l,L(function(e){e.root.getDirectory("saved",R,L(function(e){var n=function(){e.getFile(u,R,L(function(e){e.createWriter(L(function(n){n.onwriteend=function(t){y.location.href=e.toURL(),w.readyState=w.DONE,v(w,"writeend",t),p(e)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&b()},"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=w["on"+e]}),n.write(t),w.abort=function(){n.abort(),w.readyState=w.DONE},w.readyState=w.WRITING}),b)}),b)};e.getFile(u,{create:!1},L(function(e){e.remove(),n()}),L(function(e){e.code===e.NOT_FOUND_ERR?n():b()}))}),b)}),b)):void b())},y=m.prototype,g=function(e,t,n){return new m(e,t,n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return n||(e=h(e)),navigator.msSaveOrOpenBlob(e,t||"download")}:(y.abort=function(){var e=this;e.readyState=e.DONE,v(e,"abort")},y.readyState=y.INIT=0,y.WRITING=1,y.DONE=2,y.error=y.onwritestart=y.onprogress=y.onwrite=y.onabort=y.onerror=y.onwriteend=null,g)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs}),MapLabel.prototype=new google.maps.OverlayView,window.MapLabel=MapLabel,MapLabel.prototype.changed=function(e){switch(e){case"fontFamily":case"fontSize":case"fontColor":case"strokeWeight":case"strokeColor":case"align":case"text":return this.drawCanvas_();case"maxZoom":case"minZoom":case"position":return this.draw()}},MapLabel.prototype.drawCanvas_=function(){var e=this.canvas_;if(e){var t=e.style;t.zIndex=this.get("zIndex");var n=e.getContext("2d");n.clearRect(0,0,e.width,e.height),n.strokeStyle=this.get("strokeColor"),n.fillStyle=this.get("fontColor"),n.font=this.get("fontSize")+"px "+this.get("fontFamily");var o=Number(this.get("strokeWeight")),r=this.get("text");if(r){o&&(n.lineWidth=o,n.strokeText(r,o,o)),n.fillText(r,o,o);var a=n.measureText(r),i=a.width+o;t.marginLeft=this.getMarginLeft_(i)+"px",t.marginTop="-0.4em"}}},MapLabel.prototype.onAdd=function(){var e=this.canvas_=document.createElement("canvas"),t=e.style;t.position="absolute";var n=e.getContext("2d");n.lineJoin="round",n.textBaseline="top",this.drawCanvas_();var o=this.getPanes();o&&o.mapPane.appendChild(e)},MapLabel.prototype.onAdd=MapLabel.prototype.onAdd,MapLabel.prototype.getMarginLeft_=function(e){switch(this.get("align")){case"left":return 0;case"right":return-e}return e/-2},MapLabel.prototype.draw=function(){var e=this.getProjection();if(e&&this.canvas_){var t=this.get("position");if(t){var n=e.fromLatLngToDivPixel(t),o=this.canvas_.style;o.top=n.y+"px",o.left=n.x+"px",o.visibility=this.getVisible_()}}},MapLabel.prototype.draw=MapLabel.prototype.draw,MapLabel.prototype.getVisible_=function(){var e=this.get("minZoom"),t=this.get("maxZoom");if(void 0===e&&void 0===t)return"";var n=this.getMap();if(!n)return"";var o=n.getZoom();return e>o||o>t?"hidden":""},MapLabel.prototype.onRemove=function(){var e=this.canvas_;e&&e.parentNode&&e.parentNode.removeChild(e)},MapLabel.prototype.onRemove=MapLabel.prototype.onRemove,!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.xr=n.exports}}(this,function(e,t){"use strict";function n(e){return{status:e.status,response:e.response,xhr:e}}function o(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;t>o;o++)n[o-1]=arguments[o];for(var r in n)if({}.hasOwnProperty.call(n,r)){var a=n[r];if("object"==typeof a)for(var i in a)({}).hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}function r(e){var t=[];for(var n in e)({}).hasOwnProperty.call(e,n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}function a(e){l=o({},l,e)}function i(e,t){return(e&&e.promise?e.promise:l.promise||f.promise)(t)}function s(e){return i(e,function(t,a){var i=o({},f,l,e),s=i.xmlHttpRequest();s.open(i.method,i.params?i.url.split("?")[0]+"?"+r(i.params):i.url,!0),s.addEventListener(u.LOAD,function(){if(s.status>=200&&s.status<300){var e=null;s.responseText&&(e=i.raw===!0?s.responseText:i.load(s.responseText)),t(e)}else a(n(s))}),s.addEventListener(u.ABORT,function(){return a(n(s))}),s.addEventListener(u.ERROR,function(){return a(n(s))}),s.addEventListener(u.TIMEOUT,function(){return a(n(s))});for(var d in i.headers)({}).hasOwnProperty.call(i.headers,d)&&s.setRequestHeader(d,i.headers[d]);for(var d in i.events)({}).hasOwnProperty.call(i.events,d)&&s.addEventListener(d,i.events[d].bind(null,s),!1);var c="object"!=typeof i.data||i.raw?i.data:i.dump(i.data);void 0!==c?s.send(c):s.send()})}var d={GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",PATCH:"PATCH",OPTIONS:"OPTIONS"},u={READY_STATE_CHANGE:"readystatechange",LOAD_START:"loadstart",PROGRESS:"progress",ABORT:"abort",ERROR:"error",LOAD:"load",TIMEOUT:"timeout",LOAD_END:"loadend"},f={method:d.GET,data:void 0,headers:{Accept:"application/json","Content-Type":"application/json"},dump:JSON.stringify,load:JSON.parse,xmlHttpRequest:function(){return new XMLHttpRequest},promise:function(e){return new Promise(e)}},l={};s.assign=o,s.urlEncode=r,s.configure=a,s.Methods=d,s.Events=u,s.defaults=f,s.get=function(e,t,n){return s(o({url:e,method:d.GET,params:t},n))},s.put=function(e,t,n){return s(o({url:e,method:d.PUT,data:t},n))},s.post=function(e,t,n){return s(o({url:e,method:d.POST,data:t},n))},s.patch=function(e,t,n){return s(o({url:e,method:d.PATCH,data:t},n))},s.del=function(e,t){return s(o({url:e,method:d.DELETE},t))},s.options=function(e,t){return s(o({url:e,method:d.OPTIONS},t))},t.exports=s});